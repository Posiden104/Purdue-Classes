<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 7. Testing using JUnit</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="DrJava User Documentation"><link rel="up" href="index.html" title="DrJava User Documentation"><link rel="prev" href="ch06s03.html" title="Selecting a Compiler"><link rel="next" href="ch07s02.html" title="Simple Test Example"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 7. Testing using JUnit</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="junit"></a>Chapter 7. Testing using JUnit</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch07.html#junit-writing">Writing Unit Tests with JUnit</a></span></dt><dt><span class="section"><a href="ch07s02.html">Simple Test Example</a></span></dt><dt><span class="section"><a href="ch07s03.html">Viewing Test Failures</a></span></dt></dl></div><p>While compilers can look for structural problems in a program, they cannot tell whether the results of a program or method are correct.  Instead, all developers test their programs to ensure that they behave as expected.  This can be as simple as calling a method in the Interactions Pane to view its results, but this technique requires you to think about the answers you expect every time you run any tests.  A much better solution is to give the tests the answers you expect, and let the tests themselves do all the work.</p><p>Thankfully, a technique known as unit testing makes this quite easy.  You write many small tests that create your objects and assert that they behave the way you expect in different situations.  A unit test framework known as JUnit (<a href="http://www.junit.org" target="_top">http://www.junit.org</a>) automates the process of running these tests, letting you quickly see whether your program returns the results you expect.</p><p>DrJava makes the process of running unit tests very simple by providing support for JUnit.  Once you have written a JUnit test class (as described in the next section), you can simply choose the "Test Current Document" command from the Tools menu to run the tests and view the results.  The name of the tests being run will be shown in the Test Output tab, with each test method turning green if it completes successfully and red if it fails.  Any failures will be displayed after the list of methods in the same way as the <a href="ch06s02.html" title="Viewing Compiler Errors">compiler errors</a>.  A progress bar will keep you updated on how many tests have been run.</p><p>Also, clicking the "Test" button on the toolbar or choosing "Test All Documents" from the Tools menu will run JUnit on any open testcases, making running multiple test files very simple.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="junit-writing"></a>Writing Unit Tests with JUnit</h2></div></div></div><p>With the JUnit framework, unit tests are any public classes that extend the <code class="literal">junit.framework.TestCase</code> class, and that have any number of methods with names beginning with the word "<code class="literal">test</code>".  JUnit provides methods to easily assert things about your own classes, as well as the ability to run a group of tests.</p><p>The requirements for writing unit test classes are described below, with an example provided in the next section.  In general, though, the intent is for you to create instances of your classes in the test methods, get results from any methods that you call, and assert that those results match your expectations.  If these assertions pass, then your program has behaved correctly and your tests have succeeded.</p><p><b>Writing a Test Case. </b>To use DrJava's Test command on a document, you must use the programming conventions outlined below.  You can also choose the "New JUnit Test Case" command from the File menu to automatically generate a template with these conventions.
         </p><div class="itemizedlist"><ul type="disc"><li><p>At the top of the file, include:</p><pre class="programlisting">import junit.framework.TestCase;</pre></li><li><p>The main class of the file must:</p><div class="itemizedlist"><ul type="circle"><li><p>be <code class="literal">public</code></p></li><li><p><code class="literal">extend TestCase</code></p></li></ul></div></li><li><p>Methods of this class to be run automatically when the Test command is invoked must:</p><div class="itemizedlist"><ul type="circle"><li><p>be <code class="literal">public</code> and <span class="emphasis"><em>not</em></span> <code class="literal">static</code></p></li><li><p>return <code class="literal">void</code></p></li><li><p>take no arguments</p></li><li><p>have a name beginning with "<code class="literal">test</code>"</p></li></ul></div></li><li><p>Test methods in this class can call any of the following methods (among others):</p><div class="itemizedlist"><ul type="circle"><li><pre class="programlisting">void assertTrue(String, boolean)</pre><p>which issues an error report with the given string if the boolean is false.</p></li><li><pre class="programlisting">void assertEquals(String, int, int)</pre><p>which issues an error report with the given string if the two integers are not equal.  The first int is the expected value, and the second int is the actual (tested) value.  Note that this method can also be called using any primitives or with Objects, using their <code class="literal">equals()</code> methods for comparison.</p></li><li><pre class="programlisting">void fail(String)</pre><p>which immediately causes the test to fail, issuing an error report with the given string.</p></li></ul></div><p>Test methods are permitted to throw any type of exception, as long as it is declared in the "<code class="literal">throws</code>" clause of the method contract.  If an exception is thrown, the test fails immediately.</p></li><li><p>If there is any common setup work to be done before running each test (such as initializing instance variables), do it in the body of a method with the following contract:</p><pre class="programlisting">protected void setUp()</pre><p>This method is automatically run before any tests in the class.  (Similarly, you can write a <code class="literal">protected void tearDown()</code> method to be called after each test.)</p></li><li><p>If you would rather control which methods are called when running the tests (rather than using all methods starting with "<code class="literal">test</code>"), you can write a method to create a test suite.  This method should be of the form:</p><pre class="programlisting">
public static Test suite() {
  TestSuite suite = new TestSuite();
  suite.addTest(new &lt;classname&gt;("&lt;methodname&gt;"));
  ...
  return suite;
}
</pre><p>It is then also necessary to import <code class="literal">TestSuite</code> and <code class="literal">Test</code> from <code class="literal">junit.framework</code>.  There is also a version of the <code class="literal">addTest</code> method that takes a <code class="literal">Test</code>, so test suites can be composed.</p></li></ul></div><p>
</p><p>A simple example of a TestCase class is given in the next section.  There are many other ways to use JUnit, as well.  See the JUnit Cookbook at <a href="http://junit.sourceforge.net/doc/cookbook/cookbook.htm" target="_top">http://junit.sourceforge.net/doc/cookbook/cookbook.htm</a> for more examples and information.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Selecting a Compiler </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Simple Test Example</td></tr></table></div></body></html>
